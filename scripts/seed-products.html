<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Firestore ì œí’ˆ ë°ì´í„° ì‹œë”©</title>
  <style>
    body { font-family: sans-serif; max-width: 700px; margin: 40px auto; padding: 0 20px; background: #f5f5f5; }
    h1 { font-size: 22px; margin-bottom: 8px; }
    .card { background: #fff; border-radius: 12px; padding: 24px; margin-bottom: 16px; box-shadow: 0 2px 8px rgba(0,0,0,.08); }
    button { background: #2E7D32; color: #fff; border: none; border-radius: 8px; padding: 12px 24px; font-size: 15px; cursor: pointer; margin-right: 8px; }
    button:disabled { opacity: .5; cursor: default; }
    button.secondary { background: #555; }
    #log { background: #1e1e1e; color: #d4d4d4; border-radius: 8px; padding: 16px; font-family: monospace; font-size: 13px; line-height: 1.7; min-height: 160px; white-space: pre-wrap; }
    .ok  { color: #4ec94e; }
    .err { color: #f47174; }
    .info{ color: #79c0ff; }
    #status { font-size: 14px; color: #555; margin-top: 8px; }
  </style>
</head>
<body>
  <h1>ğŸŒ± Firestore products ì‹œë“œ ë°ì´í„° ì¶”ê°€</h1>
  <p style="color:#666; margin-bottom:20px;">Firebase ê´€ë¦¬ì ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ í›„ ì•„ë˜ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.<br>
    ê¸°ì¡´ products ì»¬ë ‰ì…˜ì„ <strong>ë®ì–´ì“°ì§€ ì•Šê³ </strong> ìƒˆ ë¬¸ì„œë¡œ ì¶”ê°€í•©ë‹ˆë‹¤.</p>

  <div class="card">
    <button id="login-btn">Googleë¡œ ë¡œê·¸ì¸</button>
    <button id="logout-btn" class="secondary" style="display:none;">ë¡œê·¸ì•„ì›ƒ</button>
    <p id="status">ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
  </div>

  <div class="card">
    <button id="seed-btn" disabled>ğŸ“¦ í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¶”ê°€ (ì´ 16ê°œ)</button>
    <button id="clear-btn" class="secondary" disabled style="margin-top:8px;">ğŸ—‘ï¸ products ì»¬ë ‰ì…˜ ì „ì²´ ì‚­ì œ (ì£¼ì˜)</button>
    <div id="log" style="margin-top:16px;">ëŒ€ê¸° ì¤‘...</div>
  </div>

  <!-- Firebase SDK (compat ë²„ì „ - ì‹œë“œ ìŠ¤í¬ë¦½íŠ¸ ì „ìš©) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

  <script>
    // â”€â”€â”€ Firebase ì´ˆê¸°í™” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const firebaseConfig = {
      apiKey:            "AIzaSyCrTc8dfSzjqTcsFi-ytUnh_ZsWdhGQLWE",
      authDomain:        "gilnyang-a9516.firebaseapp.com",
      projectId:         "gilnyang-a9516",
      storageBucket:     "gilnyang-a9516.firebasestorage.app",
      messagingSenderId: "496614893032",
      appId:             "1:496614893032:web:51352e2f69dde60774f05d",
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db   = firebase.firestore();

    // â”€â”€â”€ ì‹œë“œ ë°ì´í„° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const PRODUCTS = [
      // â”€â”€ ì˜ì–‘ (nutrition) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      {
        name: "ë¡œì–„ìºë‹Œ í‚¤íŠ¼ ë“œë¼ì´ì‚¬ë£Œ 2kg",
        category: "nutrition",
        description: "ìƒí›„ 12ê°œì›” ë¯¸ë§Œ ê³ ì–‘ì´ë¥¼ ìœ„í•œ ë§ì¶¤ ì˜ì–‘ ì‚¬ë£Œ. ë‘ë‡Œ ë°œë‹¬ê³¼ ë©´ì—­ë ¥ ê°•í™”ì— ìµœì í™”ëœ ì„±ë¶„ êµ¬ì„±.",
        imageUrl: "",
        link: "https://link.coupang.com/a/placeholder-kitten-food",
        targetSpecies: ["cat"],
        targetAge: ["kitten"],
        badge: "ì˜¨ìœ ì§‘ì‚¬ ì¶”ì²œ",
      },
      {
        name: "íìŠ¤ ì‚¬ì´ì–¸ìŠ¤ ë‹¤ì´ì–´íŠ¸ ì–´ëœíŠ¸ 1~6ì„¸ ê³ ì–‘ì´ ì‚¬ë£Œ",
        category: "nutrition",
        description: "100% ì²œì—° ì¬ë£Œë¡œ ë§Œë“  ì„±ì²´ ê³ ì–‘ì´ ì „ìš© ê· í˜• ì˜ì–‘ì‹. ì‹ ì¥ ê±´ê°• ë° ì²´ì¤‘ ê´€ë¦¬ ì§€ì›.",
        imageUrl: "",
        link: "https://link.coupang.com/a/placeholder-adult-cat-food",
        targetSpecies: ["cat"],
        targetAge: ["adult"],
        badge: "",
      },
      {
        name: "ë¡œì–„ìºë‹Œ ì—ì´ì§• 12+ ë…¸ë ¹ë¬˜ ì‚¬ë£Œ",
        category: "nutrition",
        description: "12ì„¸ ì´ìƒ ë…¸ë ¹ë¬˜ë¥¼ ìœ„í•œ íŠ¹ìˆ˜ ì˜ì–‘ ë°°í•©. ì†Œí™” í¡ìˆ˜ìœ¨ì„ ë†’ì´ê³  ê·¼ìœ¡ëŸ‰ ìœ ì§€ë¥¼ ë„ì™€ì¤˜ìš”.",
        imageUrl: "",
        link: "https://link.coupang.com/a/placeholder-senior-cat-food",
        targetSpecies: ["cat"],
        targetAge: ["senior"],
        badge: "ì˜¨ìœ ì§‘ì‚¬ ì¶”ì²œ",
      },
      {
        name: "í“¨ë¦¬ë‚˜ í”„ë¡œí”Œëœ ê°•ì•„ì§€ í¼í”¼ ì‚¬ë£Œ 3kg",
        category: "nutrition",
        description: "DHAÂ·EPA í•¨ìœ  í¼í”¼ ì „ìš© ì‚¬ë£Œ. ë‡Œì™€ ì‹œë ¥ ë°œë‹¬ì„ ë•ê³  ë©´ì—­ ì‹œìŠ¤í…œì„ ê°•í™”í•´ìš”.",
        imageUrl: "",
        link: "https://link.coupang.com/a/placeholder-puppy-food",
        targetSpecies: ["dog"],
        targetAge: ["kitten"],
        badge: "",
      },
      {
        name: "ì˜¤ë¦¬ì   ì–´ëœíŠ¸ ê°•ì•„ì§€ ì‚¬ë£Œ",
        category: "nutrition",
        description: "ì‹ ì„ í•œ ê³ ê¸° 85% í•¨ëŸ‰ì˜ ê³ ë‹¨ë°± ì„±ì²´ê²¬ ì‚¬ë£Œ. ê·¸ë ˆì¸í”„ë¦¬ ë ˆì‹œí”¼ë¡œ ì•ŒëŸ¬ì§€ ê±±ì • ì—†ì´.",
        imageUrl: "",
        link: "https://link.coupang.com/a/placeholder-adult-dog-food",
        targetSpecies: ["dog"],
        targetAge: ["adult"],
        badge: "ì˜¨ìœ ì§‘ì‚¬ ì¶”ì²œ",
      },
      {
        name: "íìŠ¤ í”„ë¦¬ìŠ¤í¬ë¦½ì…˜ ë…¸ë ¹ê²¬ j/d ê´€ì ˆ ì‚¬ë£Œ",
        category: "nutrition",
        description: "ì˜¤ë©”ê°€3Â·ê¸€ë£¨ì½”ì‚¬ë¯¼ ê°•í™” ë…¸ë ¹ê²¬ ì „ìš© ì‚¬ë£Œ. ê´€ì ˆ ìœ ì—°ì„± ê°œì„  ì„ìƒ ì‹¤í—˜ ê²€ì¦ ì™„ë£Œ.",
        imageUrl: "",
        link: "https://link.coupang.com/a/placeholder-senior-dog-food",
        targetSpecies: ["dog"],
        targetAge: ["senior"],
        badge: "",
      },

      // â”€â”€ ê·¸ë£¨ë° (grooming) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      {
        name: "í›„ì§€ì™€ë¼ ê³ ì–‘ì´ ìŠ¬ë¦¬ì»¤ ë¸ŒëŸ¬ì‹œ",
        category: "grooming",
        description: "ë§¤ì¼ 5ë¶„ ë¹—ì§ˆë¡œ í„¸ ë‚ ë¦¼ 90% ê°ì†Œ. ìŠ¤í…Œì¸ë¦¬ìŠ¤ í•€ì´ ë¶€ë“œëŸ½ê²Œ ì†í„¸ê¹Œì§€ ì •ë¦¬í•´ì¤˜ìš”.",
        imageUrl: "",
        link: "https://link.coupang.com/a/placeholder-cat-brush",
        targetSpecies: ["cat"],
        targetAge: ["kitten", "adult", "senior"],
        badge: "",
      },
      {
        name: "í˜í‹°ì¹´ ê°•ì•„ì§€ ì…€í”„ ì„¸ì • ë¸ŒëŸ¬ì‹œ",
        category: "grooming",
        description: "ë²„íŠ¼ í•œ ë²ˆìœ¼ë¡œ í„¸ì´ ì™! ë§¤ì¼ ë¹—ì§ˆë¡œ í”¼ë¶€ ë§ˆì‚¬ì§€ íš¨ê³¼ê¹Œì§€. ì†Œí˜•Â·ì¤‘í˜•ê²¬ ì „ìš©.",
        imageUrl: "",
        link: "https://link.coupang.com/a/placeholder-dog-brush",
        targetSpecies: ["dog"],
        targetAge: ["kitten", "adult", "senior"],
        badge: "ì˜¨ìœ ì§‘ì‚¬ ì¶”ì²œ",
      },
      {
        name: "ë² ì´í¬ì§€ ê³ ì–‘ì´ ì €ìê·¹ ìƒ´í‘¸ 300ml",
        category: "grooming",
        description: "ë¬´í–¥Â·ë¬´ìƒ‰ì†Œ ì €ìê·¹ í¬ë®¬ëŸ¬. ì˜ˆë¯¼í•œ í”¼ë¶€ ê³ ì–‘ì´ì—ê²Œë„ ì•ˆì‹¬í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš”.",
        imageUrl: "",
        link: "https://link.coupang.com/a/placeholder-cat-shampoo",
        targetSpecies: ["cat"],
        targetAge: ["adult", "senior"],
        badge: "",
      },

      // â”€â”€ ê±´ê°• (health) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      {
        name: "ë‰´íŠ¸ë¦¬ë² íŠ¸ ê³ ì–‘ì´ ê´€ì ˆ ì˜ì–‘ì œ 60ì •",
        category: "health",
        description: "ê¸€ë£¨ì½”ì‚¬ë¯¼Â·ì½˜ë“œë¡œì´í‹´Â·MSM ë³µí•© ì²˜ë°©. 7ì„¸ ì´ìƒ ë…¸ë ¹ë¬˜ì˜ ê´€ì ˆ ìœ ì—°ì„±ê³¼ ì´ë™ì„±ì„ ì§€ì›.",
        imageUrl: "",
        link: "https://link.coupang.com/a/placeholder-cat-joint",
        targetSpecies: ["cat"],
        targetAge: ["senior"],
        badge: "ì˜¨ìœ ì§‘ì‚¬ ì¶”ì²œ",
      },
      {
        name: "ë‹¥í„°ë… ê°•ì•„ì§€ ê´€ì ˆ ì ¤ë¦¬ ê°„ì‹ 30ê°œì…",
        category: "health",
        description: "ë§›ìˆê²Œ ë¨¹ëŠ” ê´€ì ˆ ì¼€ì–´ ê°„ì‹. ê¸€ë£¨ì½”ì‚¬ë¯¼ 500mg + íˆì•Œë£¨ë¡ ì‚° í•¨ìœ . ì†ŒÂ·ì¤‘Â·ëŒ€í˜•ê²¬ ëª¨ë‘ OK.",
        imageUrl: "",
        link: "https://link.coupang.com/a/placeholder-dog-joint",
        targetSpecies: ["dog"],
        targetAge: ["adult", "senior"],
        badge: "",
      },
      {
        name: "ë°”ì´ì˜¤ê°€ì´ì•„ ë°˜ë ¤ë™ë¬¼ ìœ ì‚°ê·  í”„ë¡œë°”ì´ì˜¤í‹±ìŠ¤",
        category: "health",
        description: "ê³ ì–‘ì´Â·ê°•ì•„ì§€ ê³µìš© ì¥ ê±´ê°• ìœ ì‚°ê· . ì†Œí™” ë¶ˆëŸ‰Â·ë¬´ë¥¸ë³€ ê°œì„ ì— ë„ì›€. ë¬´ë¶„ë§ ìº¡ìŠí˜•.",
        imageUrl: "",
        link: "https://link.coupang.com/a/placeholder-probiotics",
        targetSpecies: ["cat", "dog"],
        targetAge: ["kitten", "adult", "senior"],
        badge: "ì˜¨ìœ ì§‘ì‚¬ ì¶”ì²œ",
      },
      {
        name: "ë™ë¬¼ë³‘ì› ì „ìš© ê³ ì–‘ì´ í—¤ì–´ë³¼ ì œê±°ì œ 100g",
        category: "health",
        description: "ë§¥ì•„Â·ì¹˜ì»¤ë¦¬ ì„±ë¶„ìœ¼ë¡œ í—¤ì–´ë³¼ì„ ìì—°ìŠ¤ëŸ½ê²Œ ë°°ì¶œ. ì—°ì–´ ë§›ìœ¼ë¡œ ê³ ì–‘ì´ê°€ ì§ì ‘ í•¥ì•„ë¨¹ì–´ìš”.",
        imageUrl: "",
        link: "https://link.coupang.com/a/placeholder-hairball",
        targetSpecies: ["cat"],
        targetAge: ["adult", "senior"],
        badge: "",
      },

      // â”€â”€ ë†€ì´ (play) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      {
        name: "ìŠ¤í¬ë˜ì³ ìº£íƒ€ì›Œ 3ë‹¨ í•´ë¨¹í˜•",
        category: "play",
        description: "ì‚¬ì´ì˜ ë¡œí”„ ìŠ¤í¬ë˜ì³ + í•´ë¨¹ + í„°ë„ ì¼ì²´í˜•. ìš´ë™Â·ìˆ˜ë©´Â·ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œë¥¼ ë™ì‹œì— í•´ê²°.",
        imageUrl: "",
        link: "https://link.coupang.com/a/placeholder-cat-tower",
        targetSpecies: ["cat"],
        targetAge: ["kitten", "adult"],
        badge: "ì˜¨ìœ ì§‘ì‚¬ ì¶”ì²œ",
      },
      {
        name: "í˜ë”ì•¤í•„ ê³ ì–‘ì´ ë‚šì‹¯ëŒ€ ì¥ë‚œê° ì„¸íŠ¸",
        category: "play",
        description: "êµì²´í˜• ëë¶€ì† 5ì¢… í¬í•¨. ë§¤ì¼ 10ë¶„ ì‚¬ëƒ¥ ë†€ì´ë¡œ ë¹„ë§Œ ì˜ˆë°©ê³¼ ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œ íš¨ê³¼.",
        imageUrl: "",
        link: "https://link.coupang.com/a/placeholder-cat-toy",
        targetSpecies: ["cat"],
        targetAge: ["kitten", "adult"],
        badge: "",
      },
      {
        name: "ì½© í¼ì¦ ê°•ì•„ì§€ ë…¸ì¦ˆì›Œí¬ ì¥ë‚œê°",
        category: "play",
        description: "ìˆ¨ê²¨ì§„ ê°„ì‹ì„ ì°¾ëŠ” ë…¸ì¦ˆì›Œí¬ ë§¤íŠ¸. 10~30ë¶„ ì§‘ì¤‘ë ¥ í›ˆë ¨ìœ¼ë¡œ ë¶„ë¦¬ë¶ˆì•ˆ ì™„í™”ì— íƒì›”.",
        imageUrl: "",
        link: "https://link.coupang.com/a/placeholder-dog-toy",
        targetSpecies: ["dog"],
        targetAge: ["kitten", "adult", "senior"],
        badge: "ì˜¨ìœ ì§‘ì‚¬ ì¶”ì²œ",
      },
    ];

    // â”€â”€â”€ UI ë¡œì§ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const loginBtn  = document.getElementById("login-btn");
    const logoutBtn = document.getElementById("logout-btn");
    const seedBtn   = document.getElementById("seed-btn");
    const clearBtn  = document.getElementById("clear-btn");
    const statusEl  = document.getElementById("status");
    const logEl     = document.getElementById("log");

    function log(msg, type = "") {
      const span = document.createElement("span");
      span.className = type;
      span.textContent = msg + "\n";
      logEl.appendChild(span);
      logEl.scrollTop = logEl.scrollHeight;
    }

    auth.onAuthStateChanged((user) => {
      if (user) {
        statusEl.innerHTML = `âœ… ë¡œê·¸ì¸ë¨: <strong>${user.email}</strong>`;
        loginBtn.style.display  = "none";
        logoutBtn.style.display = "inline-block";
        seedBtn.disabled  = false;
        clearBtn.disabled = false;
      } else {
        statusEl.textContent = "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.";
        loginBtn.style.display  = "inline-block";
        logoutBtn.style.display = "none";
        seedBtn.disabled  = true;
        clearBtn.disabled = true;
      }
    });

    loginBtn.addEventListener("click", () => {
      auth.signInWithPopup(new firebase.auth.GoogleAuthProvider()).catch(e => {
        log("ë¡œê·¸ì¸ ì˜¤ë¥˜: " + e.message, "err");
      });
    });

    logoutBtn.addEventListener("click", () => auth.signOut());

    // â”€â”€ ì‹œë“œ ì¶”ê°€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    seedBtn.addEventListener("click", async () => {
      seedBtn.disabled = true;
      logEl.textContent = "";
      log("â–¶ products ì»¬ë ‰ì…˜ì— ë°ì´í„° ì¶”ê°€ ì‹œì‘...\n", "info");

      let ok = 0, fail = 0;
      const col = db.collection("products");

      for (const product of PRODUCTS) {
        try {
          const ref = await col.add({
            ...product,
            createdAt: firebase.firestore.FieldValue.serverTimestamp(),
          });
          log(`âœ” [${product.category}] ${product.name} â†’ ${ref.id}`, "ok");
          ok++;
        } catch (e) {
          log(`âœ˜ ${product.name}: ${e.message}`, "err");
          fail++;
        }
      }

      log(`\nì™„ë£Œ: ì„±ê³µ ${ok}ê°œ, ì‹¤íŒ¨ ${fail}ê°œ`, fail ? "err" : "ok");
      seedBtn.disabled = false;
    });

    // â”€â”€ ì „ì²´ ì‚­ì œ (ì£¼ì˜) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    clearBtn.addEventListener("click", async () => {
      if (!confirm("products ì»¬ë ‰ì…˜ì˜ ëª¨ë“  ë¬¸ì„œë¥¼ ì‚­ì œí•©ë‹ˆë‹¤. ê³„ì†í• ê¹Œìš”?")) return;
      clearBtn.disabled = true;
      logEl.textContent = "";
      log("â–¶ ì „ì²´ ì‚­ì œ ì‹œì‘...\n", "info");

      try {
        const snap = await db.collection("products").get();
        const batch = db.batch();
        snap.docs.forEach(d => batch.delete(d.ref));
        await batch.commit();
        log(`âœ” ${snap.size}ê°œ ë¬¸ì„œ ì‚­ì œ ì™„ë£Œ`, "ok");
      } catch (e) {
        log("ì‚­ì œ ì˜¤ë¥˜: " + e.message, "err");
      }
      clearBtn.disabled = false;
    });
  </script>
</body>
</html>
